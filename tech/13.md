# CUIでRaspberry PiのmicroSDのクローンを作る  
 
  
GUIだとSD Card Copierがありますが、今回はCUIで。  
  

microUSBタイプのSDカードリーダが100均で販売されています。Type-C全盛なのでないかもしれませんが。  
このSDカードリーダにコピー先のmicroSDをセットしてRispberryPiに接続します。  
  
## １．rpi-cloneのインストール  
  
sshでRaspberryPiにアクセスし、以下を実行します。  
```  
$ sudo apt install git  
$ git clone https://github.com/billw2/rpi-clone.git  
$ cd rpi-clone  
$ sudo cp rpi-clone rpi-clone-setup /usr/local/sbin  
```  
## ２．SD カードのマウント先を調べる  
  
コピー先がsdaだとわかります。  
```  
$ lsblk  
```  
![lsblk](https://github.com/user-attachments/assets/53b17475-9242-4766-ac8f-b76102ada264)


## ３．クローン作成  
  
クローンを実行します。  
```  
$ sudo rpi-clone sda  
```  
  
実行するかと聞かれるので、yes  
```  
Ok to proceed with the clone? ?(yes/no): yes  
```
ラベルを入力しろと言われるので適当に(言われない場合もある)  
```
Optional destination ext type file system label (16 chars max): rpi
```
クローンが開始します。  
```
Initializing
  Imaging past partition 1 start.
  => dd if=/dev/mmcblk0 of=/dev/sda bs=1M count=8 ...
  Resizing destination disk last partition ...
    Resize success.
  Changing destination Disk ID ...
  => mkfs -t vfat -F 32  /dev/sda1 ...
  => mkfs -t ext4 -L rpi /dev/sda2 ...

Syncing file systems (can take a long time)
......
```

時間がかかります。RaspberryPi Zero 64GBのmicroSDで約1時間。  
  
Done with clone to /dev/sda  
 Start - 09:01:35 ? ?End - 10:00:16 ? ?Elapsed Time - 58:40  
  
エンターキーを押して終了です。  
```  
Hit Enter when ready to unmount the /dev/sda partitions ...  
 unmounting /mnt/clone/boot  
 unmounting /mnt/clone  
```  

  
  
以上  
