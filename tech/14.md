# raspberrypiにおけるrfriends2->rfriends3への移行手順  
  
2024/01/30 New  
2025/05/06 Mod  
  
以下にrfriens2からrfriends3への移行手順を記述します。  
  
具体的には、キーワード及び設定データをバックアップ、リストアします。  
  
Windows等、他のプラットフォームでも同様の手順で移行できます。  
```  
１．rfriends2での操作  
1.1 各種設定のバックアップ  
1.2 設定・録音データのバックアップ  
２．rfriends3での操作  
2.1 別のmicroSDにrfriends3のイメージを作成  
2.2 設定・録音データの復元  
2.3 設定の復元  
３．その他
```  
  
## １．rfriends2での操作  
### 1.1 各種設定のバックアップ  
[8-7-1]キーワードバックアップ  
[9-8-1]設定バックアップ  
  
以下の場所に2つのファイルが作成されます。  
  
\smbdir\usr2\kwbackup  
kw_20240130_xxxxxx.zip  
cfg_20240130_xxxxx.zip  
  
### 1.2 設定・録音データのバックアップ  
smbdir内にある設定・録音データ（usr2）を他の媒体にバックアップする。  
  
録音データが不要の方はusr2/kwbackupディレクトリのみで大丈夫です。  
  
以上でrfriends2での操作は終了です。  
  
rfriends2のmicroSDはうまくいかなかったときのために大事に保存しておいてください。  
  
## ２．rfriends3での操作  
### 2.1 別のmicroSDにrfriends3のイメージを作成  
[RaspebrryPi版rfriends3でラジオ録音（OSイメージ編）](https://rfriends.github.io/rfriends/distro/raspi_image.html)  
[RaspebrryPi版rfriends3でラジオ録音（スクリプト編）](https://rfriends.github.io/rfriends/distro/raspberrypi.html)  
  
上記手順に従ってmicroSDを作成する。  
rfriends3が正常に動作することを確認する。  
  
rfriends3を最新にupdateする。  
  
### 2.2 設定・録音データの復元  
1-2でバックアップした設定・録音データ（usr2）をsmbdirに戻す。  
  
録音データが不要の方はusr2/kwbackupディレクトリのみで大丈夫です。  
  
### 2.3 設定の復元  
1-1でバックアップした設定を復元する  
```  
キーワード　ー　復元
usr2\kwbackup\kw_20240130_xxxxxx.zip  
設定　ー　復元
usr2\kwbackup\cfg_20240130_xxxxx.zip  
```    
最後に、再度rfriends3を最新にupdateする。1.0.4a 以降(必須)  
  
また、定期実行(crontab)を行うには、設定-定期実行-登録が必要です。  
  
以上でrfriends3での操作は終了です。  
  
## ３．その他  
rfriends3でもrfriends2と同様にsshでの操作も可能ですが、新しいWEBベースでの操作を試してください。  
  
これで移行作業は終了です。  
質問、うまくいった、いかなかったをX、掲示板に投稿していただくと助かります。  
  
  
以上
