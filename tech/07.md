# rfriends3を使って東京のラジオを聴く・録る  
  
　よく、上京して、地元のラジオを聴きたいという話を聞きますが、今回はその逆です。  
東京から実家に帰省したけれど、東京のラジオが聴きたいという方向けの企画です。  
  
東京の住居やレンタルサーバ（東京リージョン）にプロキシサーバを建てて、  
以下の簡単な設定でrfriends3を使って東京のラジオが聴けるようになります。  
  
![1](https://github.com/user-attachments/assets/9e9c0375-8267-40d6-8cfd-32dd85df03eb)

  
初版 2025/05/07  
  
  
## １．プロキシサーバを建てる  
  
  
### 1.1 サーバを建てる  
  
いくつか方法はありますが、とりあえず２つほど。  
  
#### 1) 方法1  
  
・東京の住居にサーバを設置する。  
  
#### 2) 方法2  
  
・東京リージョンのレンタルサーバを借りる。（Conoha,さくら,kagoya等）  
現時点で、Conohaが300円/月くらい  
これを超えると、素直にラジコのプレミアムを契約したほうがいい  
  
### 1.2 サーバにsquid(プロキシサーバ)をインストールする。  
  
squidのインストールはとても簡単です。  
[kagoyaの場合](https://www.kagoya.jp/howto/cloud/vps/proxy_squid/)
  
### 1.3 ファイヤオール、セキュリティ設定を行う。  
  
・squidのポート以外を許可しない。  
・アクセスを許可するPCを限定する。  
  
  
## ２．rfriends3をインストールする  
  
rfriends3のインストール方法はこちら。  
[rfriends3のインストール方法](https://rfriends.github.io/rfriends/)
  
## ３．rfriendsの設定  
  
### 3.1 プロキシ設定  
  
設定 - パラメータ - 編集  
280行あたり  
```  
[network]  
wget_proxy = "XXX.XXX.XXX.XXX:YYYY"  
```  
  
XXX.XXX.XXX.XXX:YYYYは１で建てたサーのIPアドレスとポート番号です。  
  
### 3.2 接続確認  
  
#### 1) 地域情報更新  
  
ラジコ - 地域情報更新  
  
![2](https://github.com/user-attachments/assets/a15e9b30-6729-43e4-b890-a603d1822355)
  
トップ画面の表示に＠が付加されます。  
```  
radiko_@    :     JP13,東京都  
```  
rfriends3使用時のホームが東京（JP13）になります。  
なお、当機能は地域情報確認時のみプロキシサーバを介したアクセスを行い、そのほかのネットアクセスには影響しません。  
  
#### 2) ラジコ認証テスト  
  
管理 - メンテナンス - 接続テスト - ラジコ簡易認証 - 選択  
```  
--- token   
authtoken  : ************************  
partialkey : ************************   
nowarea    : JP13,東京都,tokyo Japan   
   
接続テストを正常終了しました。  
```  
この表示が出ない場合は、設定が間違っているか、サーバーがダウンしています。  
  
  
## ４．設定解除  
  
プロキシ接続をやめたいときは、設定をコメントアウトしてください。  
  
rfriendsの  
設定 - パラメータ - 編集  
280行あたり  
```  
[network]  
; wget_proxy = ""  
```  
  
トップ画面の表示に＠が付加されていないことを確認してください。  
```  
radiko    :     JPXX,XXXXX  
```  
  
## ５．その他  
  
　お約束の文言です。  
  
・当方には、これを使用したことによる一切の責任はないものとします。  
・また、プロキシ―サーバにセキュリティの不安を感じる方は使用しないでください。  
  
　なお、本機能は実家等にプロキシサーバを建てて地元のラジオが聞きたいという要望で以前作成したものです。  
  
以上  
  
