## 20. radikoの遅延パラメータの調整方法  
  
### 20.1 リアルタイム録音で開始が遅い、最後が切れている場合、  
以下の調整を行ってみてください。  
  
> [!CAUTION]
> ただし、ほかの録音がない時間帯に行ってください。  
  
初期状態は以下のとおり  
  
設定 - パラメータ - 編集の395行あたり  
配信遅れが20秒で、前後25秒ずつ録音する設定  
```
;　配信遅れ(0 - 50 sec)  
radiko_delay = 20  
;　前の余裕(0 - 50 sec)  
radiko_pre_margin = 25  
;　後の余裕(0 - 50 sec)  
radiko_post_margin = 25  
```
  
1) この3つのパラメータを  
```
radiko_delay = 0  
radiko_pre_margin = 0  
radiko_post_margin = 0
```
にセットし保存します。  
  
2) radikoで00分に始まる番組を予約します。  
 radikoで配信しているNHKのニュース（例：11:00-11:05）が冒頭に小さな時報が入るのでわかりやすい。  
  
3) 録音完了後、ログの確認  
0設定で録音されたかを確認。  
```
 配信遅れ : 0   マージン : 0 ( pre : 0  post : 0 )   ntp : 0  
```
  
4) 録音された番組を聴く。  
  
a)　開始付近が時報で始まる場合、配信遅れなしなので    
```
radiko_delay = 0  
radiko_pre_margin = 25  
radiko_post_margin = 25  
```
にセットし保存します。  
  
b)　例えば、30秒あたりから時報で始まる場合、30秒遅れているので  
```
radiko_delay = 30  
radiko_pre_margin = 25  
radiko_post_margin = 25  
```
にセットし保存します。  
  
    
### 20.2 よくわからないかたは、以下の設定が安全です。  
```
radiko_delay = 20  
radiko_pre_margin = 25  
radiko_post_margin = 40  
```
にセットし保存します。  
もっと余裕を持たせたい方は、radiko_post_margin = 50  
ただし、放送後の無駄な部分が増えます。  
  
### 20.3 その他
  
調整が終わったら、ほかの局も録音してみてください。  
局によって配信遅れにばらつきがあり、radiko_post_marginを多めにしたほうがいいかもしれません。  
私が経験したものとしては、ほかは1分くらいなのに、KBS京都が2分近く遅れていました。    
こういう時は  
```
radiko_delay = 60  
radiko_pre_margin = 25  
radiko_post_margin = 85  
```
にする必要があります。  
  

以上  

